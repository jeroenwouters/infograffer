/* Controllers */function InfographicsCtrl(e,t,n){e.checked1=!0;e.checked2=!0;e.edit=!1;e.clickmapval=!1;e.items=t.query();e.maps=n.query();$(document).mousemove(function(t){var n=$(window),r=n.height(),i=n.width(),s=r/2-305,o=i/2-320;e.paegex=t.pageX-o;e.paegey=t.pageY-s});e.addItem=function(){if(e.clickmapval==1&&e.edit==1){var n={label:"New!",value:100,x:e.paegex,y:e.paegey,back:"#222222"};e.items.push(t.create(n))}};e.Edit=function(){angular.forEach(e.maps,function(e){n.save({id:e._id},{center:e.center,zoom:e.zoom})});checkWidth();e.edit=!e.edit;e.checked1=!e.checked1;e.checked2=!e.checked2;angular.forEach(e.items,function(e){t.save({id:e._id},{label:e.label,value:e.value,x:e.x,y:e.y,bimage:e.bimage,back:e.back})});e.edit==0?$(".edit").html("Edit On"):$(".edit").html("Edit Off")};e.Remove=function(n){e.items.splice(e.items.indexOf(n),1);t.destroy({id:n._id})};e.ToggleClickAdd=function(){e.clickmapval=!e.clickmapval;e.clickmapval==1?$(".clickadd").html("Click to Add = On"):$(".clickadd").html("Click to Add = Off")}}function checkWidth(){var e=$window.height(),t=e/2-305;$("#map").css("top",t+"px")}var module=angular.module("myApp",["ngResource"]).factory("Items",function(e){return e("http://localhost\\:3000/items/:id",{id:"@id"},{query:{method:"GET",isArray:!0},save:{method:"PUT"},create:{method:"POST"},destroy:{method:"DELETE"}})}).factory("Map",function(e){return e("http://localhost\\:3000/maps/:id",{id:"@id"},{query:{method:"GET",isArray:!0},save:{method:"PUT"},create:{method:"POST"},destroy:{method:"DELETE"}})}).directive("item",function(){return{restrict:"E",template:'<div class="circle" style="width:{{item.value}}px;height:{{item.value}}px;left:{{item.x}}px;top:{{item.y}}px;background-image: url({{item.back}});background-color: {{item.back}};"></br>	           <div class="labels" style="top: {{item.topval}}px"><h1 class="subheader"><p ng-show="checked1">{{item.label}}</p><input ng-show="edit" ng-model="item.label" class="labels type="text" value="{{item.label}}"/></h1></div>	           <input ng-show="edit" class="color" ng-model="item.back"/>	           <div class="values" style="top:{{item.topval}}px;"><h2 class="subheader"><p ng-show="checked2">{{item.value}}</p><input ng-show="edit" class="values" ng-model="item.value" type="text" value="{{item.value}}"/></h2></div>	           <a class="alert button" ng-show="edit && !clickmapval" ng-click="Remove(item)" href="#">x</a></div>',link:function(e){e.item.back||(e.item.back="#222222");e.item.topval=e.item.value/2-60;$("input").change(function(){e.item.topval=e.item.value/2-60})}}});$(document).ready(function(){$(window).resize(checkWidth)});var $window=$(window),$pane=$("#pane1");checkWidth();$(".mapcenter").change(function(){checkWidth()});